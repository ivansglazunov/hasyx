(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4529],{76839:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(95155),l=a(59918),i=a(80239),n=a(55366);a(12115);var c=a(50504),r=a(88482),m=a(88145),d=a(97168),o=a(12108),x=a(14648),h=a(81284),u=a(46767),j=a(34835);let p=(0,a(19946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var N=a(88893);function f(){let e=(0,N.Dh)(),{data:s,status:a}=(0,o.useSession)(),{isInTelegram:l,isLoading:i,user:n,platform:f,version:v,colorScheme:g,mainButton:y,backButton:b,showAlert:w,showConfirm:T,haptic:A}=(0,x.e)(),k=async()=>{await T("Are you sure you want to sign out?")&&(A.impact("medium"),e.logout({callbackUrl:"/"}))};return(0,t.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Telegram WebApp Integration"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Secure authentication and native Telegram WebApp features"})]}),(0,t.jsx)(c.Z,{onSuccess:e=>{console.log("Authentication successful:",e)},onError:e=>{console.error("Authentication error:",e)},className:"max-w-md mx-auto"}),(0,t.jsxs)(r.Zp,{className:"max-w-md mx-auto",children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),(0,t.jsx)(r.ZB,{className:"text-lg",children:"Environment Info"})]})}),(0,t.jsxs)(r.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"In Telegram:"}),(0,t.jsx)(m.E,{variant:l?"default":"secondary",children:l?"Yes":"No"})]}),f&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Platform:"}),(0,t.jsx)(m.E,{variant:"outline",children:f})]}),v&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Version:"}),(0,t.jsx)(m.E,{variant:"outline",children:v})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Theme:"}),(0,t.jsx)(m.E,{variant:"outline",children:g})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Auth Status:"}),(0,t.jsx)(m.E,{variant:"authenticated"===a?"default":"secondary",children:a})]})]})]}),s&&n&&(0,t.jsxs)(r.Zp,{className:"max-w-md mx-auto",children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),(0,t.jsx)(r.ZB,{className:"text-lg",children:"User Info"})]})}),(0,t.jsxs)(r.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[n.photo_url&&(0,t.jsx)("img",{src:n.photo_url,alt:"Avatar",className:"w-12 h-12 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[n.first_name," ",n.last_name||""]}),n.username&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",n.username]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",n.id]})]}),n.is_premium&&(0,t.jsx)(m.E,{variant:"secondary",children:"Premium"})]}),(0,t.jsxs)(d.$,{onClick:k,variant:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]}),l&&(0,t.jsxs)(r.Zp,{className:"max-w-md mx-auto",children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p,{className:"h-5 w-5"}),(0,t.jsx)(r.ZB,{className:"text-lg",children:"WebApp Features"})]}),(0,t.jsx)(r.BT,{children:"Test native Telegram WebApp functionality"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-3",children:[(0,t.jsx)(d.$,{onClick:()=>{y.setText("Loading..."),y.showProgress(),y.show(),setTimeout(()=>{y.hideProgress(),y.setText("Done!"),A.notification("success"),setTimeout(()=>{y.hide()},2e3)},3e3)},variant:"outline",size:"sm",className:"w-full",children:"Test Main Button"}),(0,t.jsx)(d.$,{onClick:()=>{b.setOnClick(()=>{w("Back button clicked!"),b.hide()}),b.show()},variant:"outline",size:"sm",className:"w-full",children:"Test Back Button"}),(0,t.jsx)(d.$,{onClick:()=>{A.impact("light"),setTimeout(()=>A.impact("medium"),200),setTimeout(()=>A.impact("heavy"),400),setTimeout(()=>A.notification("success"),600)},variant:"outline",size:"sm",className:"w-full",children:"Test Haptic Feedback"}),(0,t.jsx)(d.$,{onClick:()=>w("Hello from Telegram WebApp!"),variant:"outline",size:"sm",className:"w-full",children:"Test Alert"})]})]}),(0,t.jsxs)(r.Zp,{className:"max-w-2xl mx-auto",children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"How to Use"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"For Development:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:'• Open this app in a regular browser to see the "Not in Telegram" state'}),(0,t.jsx)("li",{children:"• The app automatically detects the Telegram WebApp environment"}),(0,t.jsx)("li",{children:"• Mock data is used for testing outside of Telegram"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"For Production:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:"• Create a Telegram bot using @BotFather"}),(0,t.jsx)("li",{children:"• Set the Web App URL to your deployed application"}),(0,t.jsx)("li",{children:"• Configure TELEGRAM_LOGIN_BOT_TOKEN in environment variables"}),(0,t.jsx)("li",{children:"• Users can access the app through the bot's menu button"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Authentication Flow:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:"• User opens the WebApp from Telegram"}),(0,t.jsx)("li",{children:"• initData is automatically validated on the server"}),(0,t.jsx)("li",{children:"• User account is created/linked in the database"}),(0,t.jsx)("li",{children:"• NextAuth session is established with Hasura claims"})]})]})]})]})]})}function v(){return(0,t.jsx)(n.SidebarLayout,{sidebarData:l.A,breadcrumb:[{title:i.UU,link:"/"}],children:(0,t.jsx)(f,{})})}},82007:(e,s,a)=>{Promise.resolve().then(a.bind(a,76839))}},e=>{var s=s=>e(e.s=s);e.O(0,[2115,5741,8893,5366,4499,9918,8441,1684,7358],()=>s(82007)),_N_E=e.O()}]);