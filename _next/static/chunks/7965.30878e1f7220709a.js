"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7965],{37965:(t,i,e)=>{e.r(i),e.d(i,{default:()=>c});class s{lowY;index;nxt;constructor(t,i,e){this.lowY=t,this.index=i,this.nxt=e}static updateIYL(t,i,e){for(;void 0!=e&&t>=e.lowY;)e=e.nxt;return new s(t,i,e)}}class o{isExtra;w;h;x;y;c;prelim=0;mod=0;shift=0;change=0;tl;tr;el;er;msel;mser;constructor(t,i,e,s,o=!1){this.w=t,this.h=i,this.y=e,this.c=s,this.isExtra=o}layout(){this.firstWalk(),this.secondWalk(0)}firstWalk(){if(0==this.c.length)return void this.setExtremes();this.c[0].firstWalk();let t=s.updateIYL(this.c[0].el.bottom(),0,void 0);for(let i=1;i<this.c.length;i++){this.c[i].firstWalk();let e=this.c[i].er.bottom();this.separate(i,t),t=s.updateIYL(e,i,t)}this.positionRoot(),this.setExtremes()}setExtremes(){0==this.c.length?(this.el=this,this.er=this,this.msel=this.mser=0):(this.el=this.c[0].el,this.msel=this.c[0].msel,this.er=this.c[this.c.length-1].er,this.mser=this.c[this.c.length-1].mser)}separate(t,i){let e=this.c[t-1],s=e.mod,o=this.c[t],h=o.mod,r=!0;for(;void 0!==e&&void 0!==o;){e.bottom()>i.lowY&&(i=i.nxt);let n=s+e.prelim+e.w-(h+o.prelim);(n>0||r&&n<=0)&&(h+=n,this.moveSubtree(t,i.index,n)),r=!1;let c=e.bottom(),a=o.bottom();c<=a&&void 0!==(e=e.nextRightContour())&&(s+=e.mod),c>=a&&void 0!==(o=o.nextLeftContour())&&(h+=o.mod)}void 0==e&&void 0!=o?this.setLeftThread(t,o,h):void 0!=e&&void 0==o&&this.setRightThread(t,e,s)}moveSubtree(t,i,e){this.c[t].mod+=e,this.c[t].msel+=e,this.c[t].mser+=e,this.distributeExtra(t,i,e)}nextLeftContour(){return 0==this.c.length?this.tl:this.c[0]}nextRightContour(){return 0==this.c.length?this.tr:this.c[this.c.length-1]}bottom(){return this.y+this.h}setLeftThread(t,i,e){let s=this.c[0].el;s.tl=i;let o=e-i.mod-this.c[0].msel;s.mod+=o,s.prelim-=o,this.c[0].el=this.c[t].el,this.c[0].msel=this.c[t].msel}setRightThread(t,i,e){let s=this.c[t].er;s.tr=i;let o=e-i.mod-this.c[t].mser;s.mod+=o,s.prelim-=o,this.c[t].er=this.c[t-1].er,this.c[t].mser=this.c[t-1].mser}positionRoot(){this.prelim=(this.c[0].prelim+this.c[0].mod+this.c[this.c.length-1].mod+this.c[this.c.length-1].prelim+this.c[this.c.length-1].w)/2-this.w/2}secondWalk(t){for(let i of(t+=this.mod,this.x=this.prelim+t,this.addChildSpacing(),this.c))i.secondWalk(t)}distributeExtra(t,i,e){if(i!=t-1){let s=t-i;this.c[i+1].shift+=e/s,this.c[t].shift-=e/s,this.c[t].change-=e-e/s}}addChildSpacing(){let t=0,i=0;for(let e of this.c)t+=e.shift,i+=t+e.change,e.mod+=i}}class h{options;constructor(t){this.options={horizontalSpacing:10,verticalSpacing:20,lineWidth:3,layerHeight:void 0,...t}}run(t){let i=this.makeTree(t,t.customY);return i.layout(),this.setLayoutResult(t,i),i}makeTree(t,i=0){let e=t.w+this.options.horizontalSpacing,s=t.h+this.options.verticalSpacing,h=t.extraVerticalSpacing??0,r=this.options.layerHeight;void 0!==r&&(s=Math.ceil(s/r)*r,h=Math.round(h/r)*r),void 0!==t.customY&&(h=t.customY-i,t.y=i+h),t.y=i+h;let n=new o(e,s,t.y,t.children.map(i=>this.makeTree(i,t.y+s)));return(h<0&&console.warn("Node has negative extra space, ignoring",t),h>0)?new o(this.options.lineWidth,h,i,[n],!0):n}setLayoutResult(t,i){i.isExtra&&(i=i.c[0]),t.x=i.x+this.options.horizontalSpacing/2,t.children.forEach((t,e)=>this.setLayoutResult(t,i.c[e]))}}class r{name="tidytree";dataOnly=!1;horizontalSpacing=20;verticalSpacing=40;direction="TB";extraVerticalSpacings={};customYs={};lineWidth=5;layerHeight=void 0;edgeComparator=void 0;sizeGetter=()=>({});fit=!0;padding=30;pan=void 0;zoom=void 0;spacingFactor=1;transform=(t,i)=>i;animate=!1;animationDuration=500;animationEasing=void 0;animateFilter=()=>!0;ready=void 0;stop=void 0;nodeDimensionsIncludeLabels=!0}function n(t){this.options={...new r,...t}}function c(t){t("layout","tidytree",n)}n.prototype.createTreeData=function(){let t=this.options.nodeDimensionsIncludeLabels??!0,i=this.options.eles,e=this.options.customYs,s=this.options.extraVerticalSpacings,o=new Set;for(let h of i.nodes()){let i={...h.layoutDimensions({nodeDimensionsIncludeLabels:t}),...this.options.sizeGetter(h)};("LR"===this.options.direction||"RL"===this.options.direction)&&([i.w,i.h]=[i.h,i.w]);let r={id:h.id(),w:i.w,h:i.h,children:[],extraVerticalSpacing:s[h.id()],customY:void 0===e[h.id()]?void 0:e[h.id()]-i.h/2};h.scratch("tidytree",r),o.add(r)}let h=this.options.edgeComparator;for(let t of void 0===h?i.edges():i.edges().sort(h)){let i=t.source().scratch("tidytree"),e=t.target().scratch("tidytree");o.has(e)&&(i.children.push(e),o.delete(e))}if(0===o.size){let t=i.nodes().first(),e=t.scratch("tidytree");for(let i of(o.add(e),t.incomers("node"))){let t=i.scratch("tidytree"),s=t.children.indexOf(e);-1!==s&&t.children.splice(s,1)}}return{w:0,h:0,children:Array.from(o),customY:Math.min(-this.options.verticalSpacing,-(this.options.layerHeight??0))}},n.prototype.run=function(){let t=this.createTreeData(),i=new h(this.options).run(t),e=this.options.eles.nodes();return this.options.dataOnly||e.layoutPositions(this,this.options,t=>{let i=t.scratch("tidytree"),e={x:i.x+i.w/2,y:i.y+i.h/2};return("LR"===this.options.direction||"RL"===this.options.direction)&&([e.x,e.y]=[e.y,e.x]),"BT"===this.options.direction&&(e.y=-e.y),"RL"===this.options.direction&&(e.x=-e.x),e}),{treeData:t,tree:i}},void 0!==window.cytoscape&&c(window.cytoscape)}}]);